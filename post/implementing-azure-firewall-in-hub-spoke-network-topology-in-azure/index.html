<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/anktsrkr.github.io\/",
  "author": {
    "@type": "Person",
    "name": "Ankit Sarkar | .NET Enthusiast",
    
    "image": "https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf"
    
  },
  "name":"Ankit Sarkar | .NET Enthusiast",
  "description":"Implementing Azure Firewall in Hub-Spoke network topology in Azure",
  "url":"https:\/\/anktsrkr.github.io\/post\/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure\/",
  "keywords":"[hub, spoke,hub, spoke, network,hub, spoke, network, topology,azure, hub, spoke,azure, hub, spoke, network,azure, hub, spoke, network, topology, ,azure, firewall,connectivity, between, spoke,connectivity, between, spoke, vnet, using, azure, firewall,azure, powershell,Point, to, Site,, Site, to, Site,VPN]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.74.3 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="Ankit Sarkar | .NET Enthusiast">
<meta name="keywords" content="hub, spoke,hub, spoke, network,hub, spoke, network, topology,azure, hub, spoke,azure, hub, spoke, network,azure, hub, spoke, network, topology, ,azure, firewall,connectivity, between, spoke,connectivity, between, spoke, vnet, using, azure, firewall,azure, powershell,Point, to, Site,, Site, to, Site,VPN">
<meta name="description" content="Implementing Azure Firewall in Hub-Spoke network topology in Azure">


<meta property="og:description" content="Implementing Azure Firewall in Hub-Spoke network topology in Azure">
<meta property="og:type" content="article">
<meta property="og:title" content="Implementing Azure Firewall in Hub-Spoke network topology in Azure">
<meta name="twitter:title" content="Implementing Azure Firewall in Hub-Spoke network topology in Azure">
<meta property="og:url" content="https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/">
<meta property="twitter:url" content="https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/">
<meta property="og:site_name" content="Ankit Sarkar | .NET Enthusiast">
<meta property="og:description" content="Implementing Azure Firewall in Hub-Spoke network topology in Azure">
<meta name="twitter:description" content="Implementing Azure Firewall in Hub-Spoke network topology in Azure">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2020-09-10T01:00:00">
  
  
    <meta property="article:modified_time" content="2020-09-10T01:00:00">
  
  
  
    
      <meta property="article:section" content="Cloud">
    
      <meta property="article:section" content="Azure architecture">
    
      <meta property="article:section" content="Hub-Spoke Topology">
    
  
  
    
      <meta property="article:tag" content="Azure">
    
      <meta property="article:tag" content="Networking">
    
      <meta property="article:tag" content="Azure Firewall">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@anktsrkr">


  <meta name="twitter:creator" content="@anktsrkr">










  <meta property="og:image" content="https://anktsrkr.github.io/images/azure.png">
  <meta property="twitter:image" content="https://anktsrkr.github.io/images/azure.png">


  <meta property="og:image" content="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=640">

    <title>Implementing Azure Firewall in Hub-Spoke network topology in Azure</title>

    <link rel="icon" href="https://anktsrkr.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://anktsrkr.github.io/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-176781214-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    <link rel="manifest" href="https://anktsrkr.github.io/manifest.json">

    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://anktsrkr.github.io/" aria-label="Go to homepage">Ankit Sarkar | .NET Enthusiast</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://anktsrkr.github.io/#about" aria-label="Open the link: /#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://anktsrkr.github.io/#about" aria-label="Read more about the author">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Ankit Sarkar | .NET Enthusiast</h4>
        
          <h5 class="sidebar-profile-bio"><strong>Technical Architect, Microsoft Certified Azure Solutions Architect Expert</strong></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/" title="Home">
    
      <i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/categories" title="Categories">
    
      <i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/tags" title="Tags">
    
      <i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/archives" title="Archives">
    
      <i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/about" title="About">
    
      <i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/anktsrkr" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/ankit-sarkar/" target="_blank" rel="noopener" title="Linkedin">
    
      <i class="sidebar-button-icon fab fa-lg fa-linkedin" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Linkedin</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/ankt_srkr" target="_blank" rel="noopener" title="Twitter">
    
      <i class="sidebar-button-icon fab fa-lg fa-twitter" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      Implementing Azure Firewall in Hub-Spoke network topology in Azure
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-09-10T01:00:00&#43;05:30">
        
  September 10, 2020

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://anktsrkr.github.io/categories/cloud">Cloud</a>, 
    
      <a class="category-link" href="https://anktsrkr.github.io/categories/azure-architecture">Azure architecture</a>, 
    
      <a class="category-link" href="https://anktsrkr.github.io/categories/hub-spoke-topology">Hub-Spoke Topology</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>Hi Everyone!</p>
<p>This post is continuation of how to series about Hub-Spoke network topology in Azure. Over the time, I will update this page with links to individual posts :</p>
<p><a href="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-1">Connect an on-premises network to a Microsoft Azure - Part 1</a></p>
<p><a href="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2">Connect an on-premises network to a Microsoft Azure - Part 2</a></p>
<p><a href="https://anktsrkr.github.io/post/implementing-hub-spoke-network-topology-in-azure-part-1">Implementing Hub-Spoke network topology in Azure - Part 1</a></p>
<p><a href="https://anktsrkr.github.io/post/implementing-hub-spoke-network-topology-in-azure-part-2">Implementing Hub-Spoke network topology in Azure - Part 2</a></p>
<p><a href="https://anktsrkr.github.io/post/introducing-azure-firewall-in-hub-spoke-network-topology-in-azure">Introducing Azure Firewall in Hub-Spoke network topology in Azure</a></p>
<p><em>This Post - Implementing Azure Firewall in Hub-Spoke network topology in Azure</em></p>
<p>Now we are able to connect between Hub and Spokes but there is no communication between Spokes. In this post we are going to see how Intra-Region Spokes VNET routing works.</p>
<p>We will start by creating Azure Firewall. Like gateway subnet, Azure firewall also need dedicated subnet for it. Since azure firewall is shared service, we will put it in hub-vnet. Let&rsquo;s create a subnet called <code>AzurefirwallSubnet</code> in hub-vnet. Azure Firewall needs a <code>/26</code> subnet size because it ensures that the firewall has enough IP addresses available to provision more virtual machine instances as it scales.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$LocationName = <span style="color:#e6db74">&#34;centralindia&#34;</span>
$ResourceGroupName = <span style="color:#e6db74">&#34;network-sandbox&#34;</span>

<span style="color:#75715e">#Create AzureFirewallSubnet in Hub Vnet</span>
$vnetName = <span style="color:#e6db74">&#34;hub-vnet&#34;</span>
$azfirewallvnetAddressSpace = <span style="color:#e6db74">&#34;10.10.10.0/26&#34;</span>

$hubVnet = Get-AzVirtualNetwork `
              -Name $vnetName

$azureFirewallSubnet = Add-AzVirtualNetworkSubnetConfig `
                          -Name <span style="color:#e6db74">&#34;AzureFirewallSubnet&#34;</span> `
                          -AddressPrefix $azfirewallvnetAddressSpace `
                          -VirtualNetwork $hubVnet

$updateHubVnet = Set-AzVirtualNetwork `
                    -VirtualNetwork $hubVnet</code></pre></div>
Once subnet is ready we will provision azure firewall. We will also need public ip for firewall. We will wait till this process is finished because we need the private ip for our next step.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#75715e"># Get a Public IP for the firewall</span>
$azFirewallName = <span style="color:#e6db74">&#34;HubAzFirewall&#34;</span>

$firewallPip = New-AzPublicIpAddress `
                  -ResourceGroupName $ResourceGroupName `
                  -Location $LocationName `
                  -AllocationMethod Static `
                  -Sku Standard `
                  -Name <span style="color:#e6db74">&#34;</span>$($azFirewallName)<span style="color:#e6db74">-PublicIp&#34;</span>


<span style="color:#75715e"># Create the firewall</span>
$azFirewall = New-AzFirewall `
                 -Name $azFirewallName `
                 -ResourceGroupName $ResourceGroupName  `
                 -Location $LocationName `
                 -VirtualNetworkName $updateHubVnet.Name`
                 -PublicIpName $firewallPip.Name</code></pre></div>
Once done, we will create a user defined route so that all the outbound flow first goes to azure firewall.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#75715e">#Create route table</span>
$spoke1ToAzFwUdr = New-AzRouteTable `
                      -Name <span style="color:#e6db74">&#39;Spoke1ToAzFwUdr&#39;</span> `
                      -ResourceGroupName $ResourceGroupName `
                      -location $LocationName

$updatedSpoke1ToAzFwUdr = $spoke1ToAzFwUdr `
                            | Add-AzRouteConfig `
                                 -Name <span style="color:#e6db74">&#34;ToAzureFirewall&#34;</span> `
                                 -AddressPrefix 0.0.0.0/0 `
                                 -NextHopType <span style="color:#e6db74">&#34;VirtualAppliance&#34;</span> `
                                 -NextHopIpAddress $azFirewall.IpConfigurations.privateipaddress `
                            | Set-AzRouteTable</code></pre></div>
Next, we will add route table to subnet from where they need to communicate each other. In our case, <code>WorkloadSubnet</code> of <code>spoke1-vnet</code> needs to communicate with <code>WorkloadSubnet</code> of <code>spoke2-vnet</code>. So we will attach newly created UDR to both subnet.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$subNetinspokeVnet =<span style="color:#e6db74">&#34;WorkloadSubnet&#34;</span>
$spoke1VnetName = <span style="color:#e6db74">&#34;spoke1-vnet&#34;</span>
                     
$spoke1Vnet = Get-AzVirtualNetwork `
                           -Name $spoke1VnetName

$WorkloadSubnetAddressSpaceForSpoke1 = <span style="color:#e6db74">&#34;10.20.1.0/24&#34;</span>

$spoke1Vnet =  Set-AzVirtualNetworkSubnetConfig `
                 -VirtualNetwork $spoke1Vnet `
                 -Name $subNetinspokeVnet `
                 -AddressPrefix $WorkloadSubnetAddressSpaceForSpoke1 `
                 -RouteTable $spokeToAzFwUdr | `
              Set-AzVirtualNetwork

$spoke2VnetName = <span style="color:#e6db74">&#34;spoke2-vnet&#34;</span>
                     
$spoke2Vnet = Get-AzVirtualNetwork `
                           -Name $spoke2VnetName

$WorkloadSubnetAddressSpaceForSpoke2 = <span style="color:#e6db74">&#34;10.30.1.0/24&#34;</span>

$spoke1Vnet =  Set-AzVirtualNetworkSubnetConfig `
                 -VirtualNetwork $spoke2Vnet `
                 -Name $subNetinspokeVnet `
                 -AddressPrefix $WorkloadSubnetAddressSpaceForSpoke2 `
                 -RouteTable $spokeToAzFwUdr | `
              Set-AzVirtualNetwork</code></pre></div>
All Set! Now <em>Next Hop</em> for every request generating from <code>Spok1JumpBox</code> and <code>Spoke2JumpBox</code> is Azure firewall, So we just need to allow the flow from <code>WorkloadSubnet</code> of <code>spoke1-vnet</code> to <code>WorkloadSubnet</code> of <code>spoke2-vnet</code>. To do that, we will create network rule in azure firewall.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$sourceAddress = <span style="color:#e6db74">&#34;10.20.1.0/24&#34;</span>

$destinationAddress =<span style="color:#e6db74">&#34;10.30.1.0/24&#34;</span>

$spoke1ToSpoke2 = New-AzFirewallNetworkRule `
                     -Name <span style="color:#e6db74">&#34;Allow-Spoke2-Routing&#34;</span> `
                     -Protocol TCP `
                     -SourceAddress $sourceAddress `
                     -DestinationAddress $destinationAddress `
                     -DestinationPort *
           
$netRuleCollection = New-AzFirewallNetworkRuleCollection `
                        -Name <span style="color:#e6db74">&#34;Spoke-to-Spoke&#34;</span> `
                        -Priority 1000 `
                        -Rule $spoke1ToSpoke2 `
                        -ActionType <span style="color:#e6db74">&#34;Allow&#34;</span>
           
$azFirewall.NetworkRuleCollections.Add($netRuleCollection)
$updatedFirewall = Set-AzFirewall -AzureFirewall $azFirewall</code></pre></div>
At this point, Spoke2JumpBox is accessible from Spoke1JumpBox!! However, Spoke1JumpBox is not accessible from Spoke2JumpBox, to enable that we just need to add a network rule, that&rsquo;s it!
<img src="https://anktsrkr.github.io/images/hub-spoke/spoke1-to-spoke2-reachable.jpg" alt="spoke2-vnet is reachable from spoke1-vnet">
Let&rsquo;s go to <a href="https://www.microsoft.com/">https://www.microsoft.com/</a> from Spoke1JumpBox. Oops! unable to reach, what happen? As I mentioned earlier, by default  all connections are denied from Azure firewall. So, create a application rule to allow google and lets see how it works.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$allowGoogle = New-AzFirewallApplicationRule `
                  -Name <span style="color:#e6db74">&#34;Allow-Google&#34;</span>  `
                  -SourceAddress $sourceAddress `
                  -Protocol http, https  `
                  -TargetFqdn www.google.com

$appRuleCollection = New-AzFirewallApplicationRuleCollection `
                        -Name <span style="color:#e6db74">&#34;Allow-Internet&#34;</span> `
                        -Priority 2000 `
                        -ActionType Allow `
                        -Rule $allowGoogle `

$azFirewall.ApplicationRuleCollections.Add($appRuleCollection)
$updatedFirewall = Set-AzFirewall -AzureFirewall $azFirewall</code></pre></div>
Once applied, We are able to reach Google! Yay!!
<img src="https://anktsrkr.github.io/images/hub-spoke/filtered-internet-access.jpg" alt="Filtered internet access">
You can also control inbound internet traffic with Azure Firewall DNAT. Assume, your VPN is not working but you have to access HubJumpBox which only have private ip. So how to access it? One of the way to access it by creating a DNAT rule.
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$rdpToHubJumpbox =  New-AzFirewallNatRule `
                       -Name <span style="color:#e6db74">&#34;RDP To HubJumpBox&#34;</span> `
                       -Protocol <span style="color:#e6db74">&#34;TCP&#34;</span> `
                       -SourceAddress * `
                       -DestinationAddress $firewallPip.IpAddress `
                       -DestinationPort <span style="color:#e6db74">&#34;4500&#34;</span> `
                       -TranslatedAddress <span style="color:#e6db74">&#34;10.10.1.4&#34;</span> `
                       -TranslatedPort <span style="color:#e6db74">&#34;3389&#34;</span>


$natRuleCollection = New-AzFirewallNatRuleCollection `
                       -Name <span style="color:#e6db74">&#34;Allow-RDP-To-HubJumpBox&#34;</span> `
                       -Priority 500 `
                       -Rule $rdpToHubJumpbox

$azFirewall.NatRuleCollections.Add($natRuleCollection)

$updatedFirewall = Set-AzFirewall -AzureFirewall $azFirewall</code></pre></div>
Once applied, You will be able to access your RDP over firewall public ip and port <code>4500</code>!
So basically, by introducing azure firewall you just enable more security in whole architecture.
Here is the final architecture, we just implemented -</p>
<p><img src="https://anktsrkr.github.io/images/hub-spoke/final-architecture.jpg" alt="Updated architecture"></p>
<h3 id="ending-note">Ending Note</h3>
<p>This whole series is based on single subscription, intra-region vnet communication.This works for small companies but for enterprise, inter-region vnet integration, multiple subscriptions is very common and also Azure Expressroute will be in use for extending On-Premise network and it involves a lot of network appliances, firewall etc. So, basically it is complex but if you get the idea of whole architecture, you good to go!</p>

              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://anktsrkr.github.io/tags/azure/">Azure</a>

  <a class="tag tag--primary tag--small" href="https://anktsrkr.github.io/tags/networking/">Networking</a>

  <a class="tag tag--primary tag--small" href="https://anktsrkr.github.io/tags/azure-firewall/">Azure Firewall</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://anktsrkr.github.io/post/resolve-azure-internal-dns-from-your-on-prem-network/" data-tooltip="Resolve Azure Internal DNS from your on prem network and Spokes vnet" aria-label="NEXT: Resolve Azure Internal DNS from your on prem network and Spokes vnet">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://anktsrkr.github.io/post/introducing-azure-firewall-in-hub-spoke-network-topology-in-azure/" data-tooltip="Introducing Azure Firewall in Hub-Spoke network topology in Azure" aria-label="PREVIOUS: Introducing Azure Firewall in Hub-Spoke network topology in Azure">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/" title="Share on Linkedin" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
    <script type="text/javascript">
      var disqus_config = function() {
        this.page.url = 'https:\/\/anktsrkr.github.io\/post\/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure\/';
        
          this.page.identifier = '\/post\/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure\/'
        
      };
      (function() {
        
        
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
          document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
          return;
        }
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'anktsrkr-github-io';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2022 Ankit Sarkar | .NET Enthusiast. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://anktsrkr.github.io/post/resolve-azure-internal-dns-from-your-on-prem-network/" data-tooltip="Resolve Azure Internal DNS from your on prem network and Spokes vnet" aria-label="NEXT: Resolve Azure Internal DNS from your on prem network and Spokes vnet">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://anktsrkr.github.io/post/introducing-azure-firewall-in-hub-spoke-network-topology-in-azure/" data-tooltip="Introducing Azure Firewall in Hub-Spoke network topology in Azure" aria-label="PREVIOUS: Introducing Azure Firewall in Hub-Spoke network topology in Azure">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure/" title="Share on Linkedin" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      
<div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fanktsrkr.github.io%2Fpost%2Fimplementing-azure-firewall-in-hub-spoke-network-topology-in-azure%2F" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fanktsrkr.github.io%2Fpost%2Fimplementing-azure-firewall-in-hub-spoke-network-topology-in-azure%2F" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fanktsrkr.github.io%2Fpost%2Fimplementing-azure-firewall-in-hub-spoke-network-topology-in-azure%2F" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i><span>Share on Linkedin</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>


    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Ankit Sarkar | .NET Enthusiast</h4>
    
      <div id="about-card-bio"><strong>Technical Architect, Microsoft Certified Azure Solutions Architect Expert</strong></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Technical Architect
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        Nottingham
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://anktsrkr.github.io/images/cover.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/languages/powershell.min.js"  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://anktsrkr.github.io/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js"></script>


  
    <script async crossorigin="anonymous" defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js"></script>
  


<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightElement(block);
  });
});
</script>





<script id="setmore_script" type="text/javascript" src="https://my.setmore.com/webapp/js/src/others/setmore_iframe.js">
</script>
<script>
  if('serviceWorker' in navigator) {
      navigator.serviceWorker
          .register('/sw.js', { scope: '/' })
          .then(function(registration) {
          });

      navigator.serviceWorker
          .ready
          .then(function(registration) {
          });
  }
</script>
 
<script>(function(w,d, s, id) {if(typeof(w.webpushr)!=='undefined') return;w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};var js, fjs = d.getElementsByTagName(s)[0];js = d.createElement(s); js.id = id;js.async=1;js.src = "https://cdn.webpushr.com/app.min.js";
  fjs.parentNode.appendChild(js);}(window,document, 'script', 'webpushr-jssdk'));
  webpushr('setup',{'key':'BMe43ojo35mmBDgHzcLMpGDpOpQAUeCGV5K0DjLuDCDgcwmOeFslg6KNr5U0SVi28oUrIXletkHcMNGwdUfQzsM' });</script>
  

<a id="Setmore_button_iframe" style="position: fixed;
 right: 20px;
 bottom: 15px;
 z-index: 9998;text-decoration: none"
    href="https://booking.setmore.com/scheduleappointment/d3cbc8af-7bd5-44c1-874b-87c9d77d82be">
    <div style="background: rgb(0, 105, 255); color: rgb(255, 255, 255);
display: table-cell;
width: auto;
height: 45px;
padding: 0 30px;
border-radius: 25px;
box-shadow: rgb(0 0 0 / 25%) 0 2px 5px;
font-family: sans-serif;
text-align: center;
vertical-align: middle;
font-weight: bold;
font-size: 14px;
color: #fff;
cursor: pointer;">#TalkWithMe</div>
</a>

    
  </body>
</html>

