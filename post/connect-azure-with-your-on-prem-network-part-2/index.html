<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/anktsrkr.github.io\/",
  "author": {
    "@type": "Person",
    "name": "Ankit Sarkar | .NET Enthusiast",
    
    "image": "https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf"
    
  },
  "name":"Ankit Sarkar | .NET Enthusiast",
  "description":"Connect an on-premises network to a Microsoft Azure",
  "url":"https:\/\/anktsrkr.github.io\/post\/connect-azure-with-your-on-prem-network-part-2\/",
  "keywords":"[hub, spoke,hub, spoke, network,hub, spoke, network, topology,azure, hub, spoke,azure, hub, spoke, network,azure, hub, spoke, network, topology, ,azure, firewall,connectivity, between, spoke,connectivity, between, spoke, vnet, using, azure, firewall,azure, powershell,Point, to, Site,, Site, to, Site,VPN]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.74.3 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="Ankit Sarkar | .NET Enthusiast">
<meta name="keywords" content="hub, spoke,hub, spoke, network,hub, spoke, network, topology,azure, hub, spoke,azure, hub, spoke, network,azure, hub, spoke, network, topology, ,azure, firewall,connectivity, between, spoke,connectivity, between, spoke, vnet, using, azure, firewall,azure, powershell,Point, to, Site,, Site, to, Site,VPN">
<meta name="description" content="Connect an on-premises network to a Microsoft Azure">


<meta property="og:description" content="Connect an on-premises network to a Microsoft Azure">
<meta property="og:type" content="article">
<meta property="og:title" content="Connect an on-premises network to a Microsoft Azure - Part 2">
<meta name="twitter:title" content="Connect an on-premises network to a Microsoft Azure - Part 2">
<meta property="og:url" content="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/">
<meta property="twitter:url" content="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/">
<meta property="og:site_name" content="Ankit Sarkar | .NET Enthusiast">
<meta property="og:description" content="Connect an on-premises network to a Microsoft Azure">
<meta name="twitter:description" content="Connect an on-premises network to a Microsoft Azure">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2020-09-06T01:00:00">
  
  
    <meta property="article:modified_time" content="2020-09-06T01:00:00">
  
  
  
    
      <meta property="article:section" content="Cloud">
    
      <meta property="article:section" content="Azure architecture">
    
      <meta property="article:section" content="Hub-Spoke Topology">
    
  
  
    
      <meta property="article:tag" content="Azure">
    
      <meta property="article:tag" content="Networking">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@anktsrkr">


  <meta name="twitter:creator" content="@anktsrkr">










  <meta property="og:image" content="https://anktsrkr.github.io/images/azure.png">
  <meta property="twitter:image" content="https://anktsrkr.github.io/images/azure.png">


  <meta property="og:image" content="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=640">

    <title>Connect an on-premises network to a Microsoft Azure - Part 2</title>

    <link rel="icon" href="https://anktsrkr.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://anktsrkr.github.io/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css" />
    
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-176781214-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://anktsrkr.github.io/" aria-label="Go to homepage">Ankit Sarkar | .NET Enthusiast</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://anktsrkr.github.io/#about" aria-label="Open the link: /#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://anktsrkr.github.io/#about" aria-label="Read more about the author">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Ankit Sarkar | .NET Enthusiast</h4>
        
          <h5 class="sidebar-profile-bio"><strong>Technical Architect, Microsoft Certified Azure Solutions Architect Expert</strong></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/" title="Home">
    
      <i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/categories" title="Categories">
    
      <i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/tags" title="Tags">
    
      <i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/archives" title="Archives">
    
      <i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/about" title="About">
    
      <i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/anktsrkr" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.linkedin.com/in/ankit-sarkar/" target="_blank" rel="noopener" title="Linkedin">
    
      <i class="sidebar-button-icon fab fa-lg fa-linkedin" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Linkedin</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/ankt_srkr" target="_blank" rel="noopener" title="Twitter">
    
      <i class="sidebar-button-icon fab fa-lg fa-twitter" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://anktsrkr.github.io/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      Connect an on-premises network to a Microsoft Azure - Part 2
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-09-06T01:00:00&#43;05:30">
        
  September 6, 2020

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://anktsrkr.github.io/categories/cloud">Cloud</a>, 
    
      <a class="category-link" href="https://anktsrkr.github.io/categories/azure-architecture">Azure architecture</a>, 
    
      <a class="category-link" href="https://anktsrkr.github.io/categories/hub-spoke-topology">Hub-Spoke Topology</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>Hi Everyone!</p>
<p>This post is continuation of how to series about Hub-Spoke network topology in Azure. Over the time, I will update this page with links to individual posts :</p>
<p><a href="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-1">Connect an on-premises network to a Microsoft Azure - Part 1</a></p>
<p><em>This Post - Connect an on-premises network to a Microsoft Azure - Part 2</em></p>
<p><a href="https://anktsrkr.github.io/post/implementing-hub-spoke-network-topology-in-azure-part-1">Implementing Hub-Spoke network topology in Azure - Part 1</a></p>
<p><a href="https://anktsrkr.github.io/post/implementing-hub-spoke-network-topology-in-azure-part-2">Implementing Hub-Spoke network topology in Azure - Part 2</a></p>
<p><a href="https://anktsrkr.github.io/post/introducing-azure-firewall-in-hub-spoke-network-topology-in-azure">Introducing Azure Firewall in Hub-Spoke network topology in Azure</a></p>
<p><a href="https://anktsrkr.github.io/post/implementing-azure-firewall-in-hub-spoke-network-topology-in-azure">Implementing Azure Firewall in Hub-Spoke network topology in Azure</a></p>
<p>In this post, we are going to create a VPN Gateway and then we will try to connect our on-premise network to Azure cloud over VPN connection.</p>
<p>Based on your requirement you can either choose Site-to-Site VPN connection or Point-to-Site VPN connection. As I mentioned in <a href="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-1">previous post</a>, VPN device is required for S2S connection, here in this post we will implement P2S connection which do not need any device.</p>
<h4 id="site-to-site-vpn-connection">Site-to-Site VPN Connection</h4>
<p>While using this option, communication between on-prem and Azure Vnet is always up. It connects over an IPsec/IKE (IKEv1 or IKEv2) VPN tunnel. This type of connection requires a VPN device located on-premises that has an externally facing public IP address assigned to it.</p>
<p><img src="https://anktsrkr.github.io/images/hub-spoke/s2s.jpg" alt="Site-To-Site VPN Connection"></p>
<h4 id="point-to-site-vpn-connection">Point-to-Site VPN Connection</h4>
<p>While using this option, you need to establish connection between on-prem and Azure Vnet manually every time you want to access from your workstation. If you shutdown your workstation, connectivity will be lost. It connects over SSTP or IKEv2 VPN tunnel.</p>
<p><img src="https://anktsrkr.github.io/images/hub-spoke/p2s.jpg" alt="Point-To-Site VPN Connection"></p>
<p>Mostly I will use azure powershell module to automate all resources in azure. We will start by creating Hub Virtual Network(<code>hub-vnet</code>), with address space <code>10.10.0.0/19</code>. We will also create a subnet <code>ManagementSubnet</code> under hub virtual network with address space <code>10.10.1.0/24</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$LocationName = <span style="color:#e6db74">&#34;centralindia&#34;</span>
$ResourceGroupName = <span style="color:#e6db74">&#34;network-sandbox&#34;</span>
$vnetName = <span style="color:#e6db74">&#34;hub-vnet&#34;</span>
$defaultSubnet = <span style="color:#e6db74">&#34;ManagementSubnet&#34;</span>
$vnetAddressSpace = <span style="color:#e6db74">&#34;10.10.0.0/19&#34;</span>
$subnetvnetAddressSpace = <span style="color:#e6db74">&#34;10.10.1.0/24&#34;</span>

$virtualNetwork = New-AzVirtualNetwork `
                     -ResourceGroupName $ResourceGroupName `
                     -Location $LocationName `
                     -Name $vnetName `
                     -AddressPrefix $vnetAddressSpace

$subnetConfig = Add-AzVirtualNetworkSubnetConfig `
                   -Name $defaultSubnet `
                   -AddressPrefix $subnetvnetAddressSpace `
                   -VirtualNetwork $virtualNetwork


$virtualNetwork = $virtualNetwork | Set-AzVirtualNetwork</code></pre></div>
<p>Next, we need to create the VPN gateway. To create VPN gateway the first requirement is to have <code>GatewaySubnet</code> in hub-vnet. Also we will need public ip for it. I&rsquo;m taking RouteBased vpn type and Basic Sku. Below script takes care of creating gateway subnet in hub-vnet and creating vpn gateway. This steps can take around 45 minutes and it depends on Sku type.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$vnetName = <span style="color:#e6db74">&#34;hub-vnet&#34;</span>
$gwAddressSpace = <span style="color:#e6db74">&#34;10.10.31.0/27&#34;</span>
<span style="color:#75715e">#Get basic details</span>
$LocationName = <span style="color:#e6db74">&#34;centralindia&#34;</span>
$ResourceGroupName = <span style="color:#e6db74">&#34;network-sandbox&#34;</span>

$hubVnet = Get-AzVirtualNetwork `
              -Name $vnetName

$gwSubnet = Add-AzVirtualNetworkSubnetConfig `
                          -Name <span style="color:#e6db74">&#34;GatewaySubnet&#34;</span> `
                          -AddressPrefix $gwAddressSpace `
                          -VirtualNetwork $hubVnet

$updateHubVnet = Set-AzVirtualNetwork `
                    -VirtualNetwork $hubVnet

$gwpip    = New-AzPublicIpAddress `
               -Name <span style="color:#e6db74">&#34;GateWayPIp&#34;</span> `
               -ResourceGroupName $ResourceGroupName `
               -AllocationMethod <span style="color:#e6db74">&#34;Dynamic&#34;</span> `
               -Location $LocationName 
               
$gwSubnet   = Get-AzVirtualNetworkSubnetConfig -Name <span style="color:#e6db74">&#39;GatewaySubnet&#39;</span> `
               -VirtualNetwork $updateHubVnet

$gwipconf = New-AzVirtualNetworkGatewayIpConfig -Name <span style="color:#e6db74">&#34;VPNGatewayIp&#34;</span> `
               -Subnet $gwSubnet -PublicIpAddress $gwpip

New-AzVirtualNetworkGateway -Name <span style="color:#e6db74">&#34;AzVpn&#34;</span> -ResourceGroupName $ResourceGroupName `
                            -Location $LocationName -IpConfigurations $gwipconf -GatewayType Vpn `
                            -VpnType RouteBased -GatewaySku Basic</code></pre></div>
<p>Once VPN Gateway is created, at this point either you can configure Site to Site connectivity or Point to Site connectivity. We will take P2S approach.</p>
<p>Azure uses certificate to authenticate VPN client. Each workspace that you connected to hub-vnet must have the client certificate installed. Now to generate a client certificate first you need to create a root certificate and you upload the public key information to Azure. The root certificate then considered as trusted. You also need to generate the client certificate from the same trusted root certificate and as I mentioned earlier you need to install it on each workspace from where you want to connect hub-vnet.</p>
<p>Either you can use your existing certificate chain or you can generate self signed certificate. In this post I will go with self signed certificate.</p>
<p>First, you will need to create root certificate and store it in current user.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$certStoreLocation = <span style="color:#e6db74">&#34;Cert:\CurrentUser\My&#34;</span>

<span style="color:#75715e">#Create a self-signed root certificate</span>

$cert = New-SelfSignedCertificate -Type Custom -KeySpec Signature `
                                -Subject <span style="color:#e6db74">&#34;CN=P2SRootCa&#34;</span> `
                                -KeyExportPolicy Exportable `
                                -HashAlgorithm sha256 -KeyLength 2048 `
                                -CertStoreLocation $certStoreLocation `
                                -KeyUsageProperty Sign `
                                -KeyUsage CertSign</code></pre></div>
<p>Next, create a client certificate signed by root certificate we just created, which needs to be installed every workstation from where you want to connect hub-vnet.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#75715e">#Generate a client certificate</span>

New-SelfSignedCertificate -Type Custom -DnsName <span style="color:#e6db74">&#34;P2SRootClient&#34;</span> -KeySpec Signature `
                            -Subject <span style="color:#e6db74">&#34;CN=P2SRootClient&#34;</span> -KeyExportPolicy Exportable `
                            -HashAlgorithm sha256 -KeyLength 2048 `
                            -CertStoreLocation $certStoreLocation `
                            -Signer $cert -TextExtension @(<span style="color:#e6db74">&#34;2.5.29.37={text}1.3.6.1.5.5.7.3.2&#34;</span>)</code></pre></div>
<p>It&rsquo;s time to download the VPN client, so to download, you need to upload public key information of root certification to azure also you need to mention address pool for your vpn client so that it can reserves a pool of IP addresses for VPN clients.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">$ResourceGroupName = <span style="color:#e6db74">&#34;network-sandbox&#34;</span>
$GatewayName=<span style="color:#e6db74">&#34;AzVpn&#34;</span>

$Gateway=Get-AzVirtualNetworkGateway -Name $GatewayName -ResourceGroupName $ResourceGroupName

$VPNClientAddressPool=<span style="color:#e6db74">&#34;192.168.0.0/24&#34;</span>
$rootCaBase64 = <span style="color:#66d9ef">[system.convert]</span>::ToBase64String($cert.RawData)

<span style="color:#75715e">#Disabling BGP</span>

$Gateway.BgpSettings =$null

<span style="color:#75715e">#Setting the VPN Client Address Pool</span>

Set-AzVirtualNetworkGateway -VirtualNetworkGateway $Gateway -VpnClientAddressPool $VPNClientAddressPool

<span style="color:#75715e">#Uploading the Certificate to the gateway</span>

Add-AzVpnClientRootCertificate -VpnClientRootCertificateName <span style="color:#e6db74">&#34;P2SRootCA&#34;</span> `
                               -VirtualNetworkGatewayname $GatewayName `
                               -ResourceGroupName $ResourceGroupName `
                               -PublicCertData $rootCaBase64</code></pre></div>
<p>Once done, go to azure portal select your vpn you just configured and then go to &ldquo;User VPN configuration&rdquo;. Download and based on your system architecture (x86 or x64) install it on your workspace.</p>
<p><img src="https://anktsrkr.github.io/images/hub-spoke/user-vpn-configuration.jpg" alt="User VPN Configuration for P2S"></p>
<p>If you are using Windows 10 you should have something like this after connecting with VPN -</p>
<p><img src="https://anktsrkr.github.io/images/hub-spoke/hub-vnet-vpn-connected.jpg" alt="User VPN Configuration for P2S"></p>
<p>At this point you have encrypted connection to hub-vnet using private ips over public internet. In <a href="https://anktsrkr.github.io/post/implementing-hub-spoke-network-topology-in-azure-part-1">next post</a>, I will deep dive into Hub-Spoke topology also we will create JumpBoxes and connect over VPN.</p>

              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://anktsrkr.github.io/tags/azure/">Azure</a>

  <a class="tag tag--primary tag--small" href="https://anktsrkr.github.io/tags/networking/">Networking</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://anktsrkr.github.io/post/implementing-hub-spoke-network-topology-in-azure-part-1/" data-tooltip="Implementing Hub-Spoke network topology in Azure - Part 1" aria-label="NEXT: Implementing Hub-Spoke network topology in Azure - Part 1">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-1/" data-tooltip="Connect an on-premises network to a Microsoft Azure - Part 1" aria-label="PREVIOUS: Connect an on-premises network to a Microsoft Azure - Part 1">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/" title="Share on Linkedin" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
    <script type="text/javascript">
      var disqus_config = function() {
        this.page.url = 'https:\/\/anktsrkr.github.io\/post\/connect-azure-with-your-on-prem-network-part-2\/';
        
          this.page.identifier = '\/post\/connect-azure-with-your-on-prem-network-part-2\/'
        
      };
      (function() {
        
        
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
          document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
          return;
        }
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'anktsrkr-github-io';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2022 Ankit Sarkar | .NET Enthusiast. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://anktsrkr.github.io/post/implementing-hub-spoke-network-topology-in-azure-part-1/" data-tooltip="Implementing Hub-Spoke network topology in Azure - Part 1" aria-label="NEXT: Implementing Hub-Spoke network topology in Azure - Part 1">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-1/" data-tooltip="Connect an on-premises network to a Microsoft Azure - Part 1" aria-label="PREVIOUS: Connect an on-premises network to a Microsoft Azure - Part 1">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://anktsrkr.github.io/post/connect-azure-with-your-on-prem-network-part-2/" title="Share on Linkedin" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      
<div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fanktsrkr.github.io%2Fpost%2Fconnect-azure-with-your-on-prem-network-part-2%2F" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fanktsrkr.github.io%2Fpost%2Fconnect-azure-with-your-on-prem-network-part-2%2F" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fanktsrkr.github.io%2Fpost%2Fconnect-azure-with-your-on-prem-network-part-2%2F" aria-label="Share on Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i><span>Share on Linkedin</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>


    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/95b5dbc23a1aea8bc95d53efd0a30edf?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Ankit Sarkar | .NET Enthusiast</h4>
    
      <div id="about-card-bio"><strong>Technical Architect, Microsoft Certified Azure Solutions Architect Expert</strong></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Technical Architect
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        Nottingham
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://anktsrkr.github.io/images/cover.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://anktsrkr.github.io/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js"></script>


  
    <script async crossorigin="anonymous" defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js"></script>
  


<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>




    
  </body>
</html>

